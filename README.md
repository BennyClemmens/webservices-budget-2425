# webservices-budget-2425

```bash
Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425
$ echo "# webservices-budget-2425" >> README.md

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425
$ git init
Initialized empty Git repository in C:/DATA/GIT/WEBSERVICES/webservices-budget-2425/.git/

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ git add README.md

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ git commit -m "initial commit (of empty directory)"
[main (root-commit) 4e61972] initial commit (of empty directory)
 1 file changed, 1 insertion(+)
 create mode 100644 README.md

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ git branch -M main

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ git remote add origin https://github.com/BennyClemmens/webservices-budget-2425.git

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ git push -u origin main
info: please complete authentication in your browser...
Enumerating objects: 3, done.
Counting objects: 100% (3/3), done.
Writing objects: 100% (3/3), 262 bytes | 262.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
To https://github.com/BennyClemmens/webservices-budget-2425.git
 * [new branch]      main -> main
branch 'main' set up to track 'origin/main'.
```

```bash
benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ yarn init -p
! Corepack is about to download https://repo.yarnpkg.com/4.3.1/packages/yarnpkg-cli/bin/yarn.js
âž¤ YN0000: Â· Yarn 4.3.1
âž¤ YN0000: â”Œ Resolution step
âž¤ YN0000: â”” Completed
âž¤ YN0000: â”Œ Fetch step
âž¤ YN0000: â”” Completed
âž¤ YN0000: â”Œ Link step
âž¤ YN0000: â”” Completed
âž¤ YN0000: Â· Done in 0s 116ms

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ ls -al
total 445
drwxr-xr-x 1 benny 197609      0 Oct 10 12:16 ./
drwxr-xr-x 1 benny 197609      0 Oct 10 12:08 ../
-rw-r--r-- 1 benny 197609    134 Oct 10 12:16 .editorconfig
drwxr-xr-x 1 benny 197609      0 Oct 10 12:14 .git/
-rw-r--r-- 1 benny 197609    142 Oct 10 12:16 .gitattributes
-rw-r--r-- 1 benny 197609    333 Oct 10 12:16 .gitignore
-rwxr-xr-x 1 benny 197609 432881 Oct 10 12:16 .pnp.cjs*
drwxr-xr-x 1 benny 197609      0 Oct 10 12:16 .yarn/
-rw-r--r-- 1 benny 197609   1474 Oct 10 12:14 README.md
-rw-r--r-- 1 benny 197609     98 Oct 10 12:16 package.json
-rw-r--r-- 1 benny 197609    342 Oct 10 12:16 yarn.lock

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ yarn set version berry
âž¤ YN0000: Done in 0s 9ms

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ echo "nodeLinker: node-modules" > .yarnrc.yml

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ cat .yarnrc.yml
nodeLinker: node-modules

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ yarn add koa
! Corepack is about to download https://repo.yarnpkg.com/4.5.0/packages/yarnpkg-cli/bin/yarn.js
âž¤ YN0000: Â· Yarn 4.5.0
âž¤ YN0000: â”Œ Resolution step
âž¤ YN0085: â”‚ + koa@npm:2.15.3, accepts@npm:1.3.8, cache-content-type@npm:1.0.1, co@npm:4.6.0, content-disposition@npm:0.5.4, content-type@npm:1.0.5, cookies@npm:0.9.1, and 35 more.
âž¤ YN0000: â”” Completed in 0s 347ms
âž¤ YN0000: â”Œ Fetch step
âž¤ YN0013: â”‚ 42 packages were added to the project (+ 880.87 KiB).
âž¤ YN0000: â”” Completed in 0s 565ms
âž¤ YN0000: â”Œ Link step
âž¤ YN0000: â”” Completed in 0s 218ms
âž¤ YN0000: Â· Done in 1s 158ms

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ cat package.json
{
  "name": "webservices-budget-2425",
  "version": "1.0.0",
  "description": "Demo application for the course Web Services.",
  "main": "index.ts",
  "repository": "git@github.com:BennyClemmens/webservices-budget-2425.git",
  "license": "MIT",
  "packageManager": "yarn@4.5.0",
  "scripts": {
    "start": "node index.js"
  },
  "private": true,
  "dependencies": {
    "koa": "^2.15.3"
  }
}

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ cat .gitignore
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ cat index.js
// index.js
const Koa = require('koa'); // ðŸ‘ˆ 1
const app = new Koa(); // ðŸ‘ˆ 1

app.use(async (ctx) => {
  // ðŸ‘‡ 3
  ctx.body = 'Hello World';
});

app.listen(9000); // ðŸ‘ˆ 2

benny@DESKTOP-NJMJN64 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ node index.js
```

Note: `yarn start` would have been an option too ...

![helloworld](img/helloworld.PNG)

```bash
benny@fujitsuwin MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ yarn start
logging the context, just after the start of the first middleware
{
  request: {
    method: 'GET',
    url: '/',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'cache-control': 'max-age=0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      'sec-ch-ua-platform': '"Windows"',
      'upgrade-insecure-requests': '1',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
      'sec-fetch-site': 'none',
      'sec-fetch-mode': 'navigate',
      'sec-fetch-user': '?1',
      'sec-fetch-dest': 'document',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 404,
    message: 'Not Found',
    header: [Object: null prototype] {}
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
just before the await next in the first middleware
logging the context, just after the start of the second middleware
{
  request: {
    method: 'GET',
    url: '/',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'cache-control': 'max-age=0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      'sec-ch-ua-platform': '"Windows"',
      'upgrade-insecure-requests': '1',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
      'sec-fetch-site': 'none',
      'sec-fetch-mode': 'navigate',
      'sec-fetch-user': '?1',
      'sec-fetch-dest': 'document',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 404,
    message: 'Not Found',
    header: [Object: null prototype] {}
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
changing the body of the ctx
logging the context, just after changing it
{
  request: {
    method: 'GET',
    url: '/',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'cache-control': 'max-age=0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      'sec-ch-ua-platform': '"Windows"',
      'upgrade-insecure-requests': '1',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
      'sec-fetch-site': 'none',
      'sec-fetch-mode': 'navigate',
      'sec-fetch-user': '?1',
      'sec-fetch-dest': 'document',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 200,
    message: 'OK',
    header: [Object: null prototype] {
      'content-type': 'text/plain; charset=utf-8',
      'content-length': '11'
    }
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
just before the await next in the second middleware
logging the context, just after the start of the third middleware
{
  request: {
    method: 'GET',
    url: '/',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'cache-control': 'max-age=0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      'sec-ch-ua-platform': '"Windows"',
      'upgrade-insecure-requests': '1',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
      'sec-fetch-site': 'none',
      'sec-fetch-mode': 'navigate',
      'sec-fetch-user': '?1',
      'sec-fetch-dest': 'document',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 200,
    message: 'OK',
    header: [Object: null prototype] {
      'content-type': 'text/plain; charset=utf-8',
      'content-length': '11'
    }
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
just before the await next in the third middleware
just behind the await next in the second middleware
just behind the await next in the first middleware
logging the context, just after the start of the first middleware
{
  request: {
    method: 'GET',
    url: '/favicon.ico',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'sec-ch-ua-platform': '"Windows"',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      accept: 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',
      'sec-fetch-site': 'same-origin',
      'sec-fetch-mode': 'no-cors',
      'sec-fetch-dest': 'image',
      referer: 'http://localhost:9000/',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 404,
    message: 'Not Found',
    header: [Object: null prototype] {}
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/favicon.ico',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
just before the await next in the first middleware
logging the context, just after the start of the second middleware
{
  request: {
    method: 'GET',
    url: '/favicon.ico',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'sec-ch-ua-platform': '"Windows"',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      accept: 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',
      'sec-fetch-site': 'same-origin',
      'sec-fetch-mode': 'no-cors',
      'sec-fetch-dest': 'image',
      referer: 'http://localhost:9000/',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 404,
    message: 'Not Found',
    header: [Object: null prototype] {}
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/favicon.ico',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
changing the body of the ctx
logging the context, just after changing it
{
  request: {
    method: 'GET',
    url: '/favicon.ico',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'sec-ch-ua-platform': '"Windows"',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      accept: 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',
      'sec-fetch-site': 'same-origin',
      'sec-fetch-mode': 'no-cors',
      'sec-fetch-dest': 'image',
      referer: 'http://localhost:9000/',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 200,
    message: 'OK',
    header: [Object: null prototype] {
      'content-type': 'text/plain; charset=utf-8',
      'content-length': '11'
    }
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/favicon.ico',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
just before the await next in the second middleware
logging the context, just after the start of the third middleware
{
  request: {
    method: 'GET',
    url: '/favicon.ico',
    header: {
      host: 'localhost:9000',
      connection: 'keep-alive',
      'sec-ch-ua-platform': '"Windows"',
      'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36 Edg/129.0.0.0',
      'sec-ch-ua': '"Microsoft Edge";v="129", "Not=A?Brand";v="8", "Chromium";v="129"',
      'sec-ch-ua-mobile': '?0',
      accept: 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',
      'sec-fetch-site': 'same-origin',
      'sec-fetch-mode': 'no-cors',
      'sec-fetch-dest': 'image',
      referer: 'http://localhost:9000/',
      'accept-encoding': 'gzip, deflate, br, zstd',
      'accept-language': 'en-US,en;q=0.9,nl;q=0.8'
    }
  },
  response: {
    status: 200,
    message: 'OK',
    header: [Object: null prototype] {
      'content-type': 'text/plain; charset=utf-8',
      'content-length': '11'
    }
  },
  app: { subdomainOffset: 2, proxy: false, env: 'development' },
  originalUrl: '/favicon.ico',
  req: '<original node req>',
  res: '<original node res>',
  socket: '<original node socket>'
}
just before the await next in the third middleware
just behind the await next in the second middleware
just behind the await next in the first middleware
```

```bash
Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ yarn add --dev typescript tsx @types/node
âž¤ YN0000: Â· Yarn 4.5.0
âž¤ YN0000: â”Œ Resolution step
âž¤ YN0085: â”‚ + @types/node@npm:22.7.5, tsx@npm:4.19.1, typescript@patch:typescript@npm%3A5.6.3#optional!builtin<compat/typescript>::version=5.6.3&hash=8c6c40, and 119 more.
âž¤ YN0000: â”” Completed in 0s 730ms
âž¤ YN0000: â”Œ Fetch step
âž¤ YN0013: â”‚ 3 packages were added to the project (+ 45.01 MiB).
âž¤ YN0000: â”” Completed in 9s 463ms
âž¤ YN0000: â”Œ Link step
âž¤ YN0007: â”‚ esbuild@npm:0.23.1 must be built because it never has been before or the last one failed
âž¤ YN0000: â”” Completed in 1s 972ms
âž¤ YN0000: Â· Done in 12s 217ms

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ git mv index.js index.ts

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ cat index.ts
// index.ts
import Koa from 'koa';

const app = new Koa(); // initialising the Koa-object, i.e. the webserver

const port = 9000;  // easier to change using this const

// middleware functions: get executed in every request
app.use(async (ctx) => {
  ctx.body = 'Hello World, now from TypeScript';
});

app.listen(port);

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ cat package.json
{
  "name": "webservices-budget-2425",
  "version": "1.0.0",
  "description": "Demo application for the course Web Services.",
  "main": "index.ts",
  "repository": "git@github.com:BennyClemmens/webservices-budget-2425.git",
  "license": "MIT",
  "packageManager": "yarn@4.5.0",
  "scripts": {
    "start": "tsx index.ts"
  },
  "private": true,
  "dependencies": {
    "koa": "^2.15.3"
  },
  "devDependencies": {
    "@types/node": "^22.7.5",
    "tsx": "^4.19.1",
    "typescript": "^5.6.3"
  }
}

Benny@FLAB2021 MINGW64 /c/DATA/GIT/WEBSERVICES/webservices-budget-2425 (main)
$ yarn start
```

![helloworld](img/helloworldts.PNG)
